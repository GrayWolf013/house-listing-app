{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { reactive, toRefs } from \"vue\";\nimport { useStore } from \"vuex\";\nimport { useRoute, useRouter } from \"vue-router\";\nimport HouseListingForm from \"@/components/HouseListingForm.vue\";\nexport default {\n  setup() {\n    const store = useStore();\n    const route = useRoute();\n    const router = useRouter();\n    const state = reactive({\n      // buttonClicked: false,\n      // previewImage: null,\n      image: null\n    });\n    // const house = computed(() => {\n    //   return store.getters.getByIdEditModel(route.params.houseId);\n    // });\n\n    function selectImage() {}\n    function uploadHouseListingImage(id) {\n      const formData = new FormData();\n      formData.append(\"image\", state.image);\n      if (state.previewImage) {\n        store.dispatch(\"uploadHouseImg\", {\n          id: id,\n          body: formData,\n          value: state.previewImage\n        }).then(() => {\n          // API success\n          console.log(\"img uploaded\");\n          router.push({\n            name: \"home\"\n          });\n        }).catch(e => {\n          // API fail\n          console.log(\"error in request upload\", e);\n        });\n      } else {\n        router.push({\n          name: \"home\"\n        });\n      }\n    }\n    // function submitButtonClicked() {\n    //   state.buttonClicked = true;\n    // }\n\n    function editHouseListing(houseModel) {\n      store.dispatch(\"editHouse\", {\n        id: route.params.houseId,\n        body: houseModel\n      }).then(() => {\n        // API success\n        uploadHouseListingImage(route.params.houseId);\n        console.log(\"data edited\");\n      }).catch(e => {\n        // API fail\n        console.log(\"error in request edit\", e);\n      });\n    }\n    function createHouseListing(houseModel) {\n      store.dispatch(\"createHouse\", houseModel).then(data => {\n        // API success\n        uploadHouseListingImage(data.id);\n        console.log(\"data created\");\n      }).catch(e => {\n        // API fail\n        console.log(\"error in request create\", e);\n      });\n    }\n    function submitForm(houseModel) {\n      if (route.params.houseId) editHouseListing(houseModel);else createHouseListing(houseModel);\n    }\n    // function uploadImage(e) {\n    //   const image = e.target.files[0];\n    //   state.image = image;\n    //   const reader = new FileReader();\n    //   reader.readAsDataURL(image);\n    //   reader.onload = (e) => {\n    //     this.previewImage = e.target.result;\n    //   };\n    // }\n    return {\n      ...toRefs(state),\n      // house,\n      submitForm,\n      // submitButtonClicked,\n      // uploadImage,\n      route\n    };\n  },\n  components: {\n    HouseListingForm\n  }\n};","map":{"version":3,"mappings":";AA4BA,SAASA,QAAQ,EAAEC,MAAK,QAAS,KAAK;AACtC,SAASC,QAAO,QAAS,MAAM;AAC/B,SAASC,QAAQ,EAAEC,SAAQ,QAAS,YAAY;AAChD,OAAOC,gBAAe,MAAO,mCAAmC;AAEhE,eAAe;EACbC,KAAK,GAAG;IACN,MAAMC,KAAI,GAAIL,QAAQ,EAAE;IACxB,MAAMM,KAAI,GAAIL,QAAQ,EAAE;IACxB,MAAMM,MAAK,GAAIL,SAAS,EAAE;IAE1B,MAAMM,KAAI,GAAIV,QAAQ,CAAC;MACrB;MACA;MACAW,KAAK,EAAE;IACT,CAAC,CAAC;IACF;IACA;IACA;;IAGE,SAASC,WAAW,GAAG,CAEvB;IAEF,SAASC,uBAAuB,CAACC,EAAE,EAAE;MACnC,MAAMC,QAAO,GAAI,IAAIC,QAAQ,EAAE;MAC/BD,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAEP,KAAK,CAACC,KAAK,CAAC;MACrC,IAAID,KAAK,CAACQ,YAAY,EAAE;QACtBX,KAAI,CACDY,QAAQ,CAAC,gBAAgB,EAAE;UAC1BL,EAAE,EAAEA,EAAE;UACNM,IAAI,EAAEL,QAAQ;UACdM,KAAK,EAAEX,KAAK,CAACQ;QACf,CAAC,EACAI,IAAI,CAAC,MAAM;UACV;UACAC,OAAO,CAACC,GAAG,CAAC,cAAc,CAAC;UAC3Bf,MAAM,CAACgB,IAAI,CAAC;YAAEC,IAAI,EAAE;UAAO,CAAC,CAAC;QAC/B,CAAC,EACAC,KAAK,CAAEC,CAAC,IAAK;UACZ;UACAL,OAAO,CAACC,GAAG,CAAC,yBAAyB,EAAEI,CAAC,CAAC;QAC3C,CAAC,CAAC;MACN,OAAO;QACLnB,MAAM,CAACgB,IAAI,CAAC;UAAEC,IAAI,EAAE;QAAO,CAAC,CAAC;MAC/B;IACF;IACA;IACA;IACA;;IAEA,SAASG,gBAAgB,CAACC,UAAU,EAAE;MACpCvB,KAAI,CACDY,QAAQ,CAAC,WAAW,EAAE;QAAEL,EAAE,EAAEN,KAAK,CAACuB,MAAM,CAACC,OAAO;QAAEZ,IAAI,EAAEU;MAAW,CAAC,EACpER,IAAI,CAAC,MAAM;QACV;QACAT,uBAAuB,CAACL,KAAK,CAACuB,MAAM,CAACC,OAAO,CAAC;QAC7CT,OAAO,CAACC,GAAG,CAAC,aAAa,CAAC;MAC5B,CAAC,EACAG,KAAK,CAAEC,CAAC,IAAK;QACZ;QACAL,OAAO,CAACC,GAAG,CAAC,uBAAuB,EAAEI,CAAC,CAAC;MACzC,CAAC,CAAC;IACN;IAEA,SAASK,kBAAkB,CAACH,UAAU,EAAE;MACtCvB,KAAI,CACDY,QAAQ,CAAC,aAAa,EAAEW,UAAU,EAClCR,IAAI,CAAEY,IAAI,IAAK;QACd;QACArB,uBAAuB,CAACqB,IAAI,CAACpB,EAAE,CAAC;QAChCS,OAAO,CAACC,GAAG,CAAC,cAAc,CAAC;MAC7B,CAAC,EACAG,KAAK,CAAEC,CAAC,IAAK;QACZ;QACAL,OAAO,CAACC,GAAG,CAAC,yBAAyB,EAAEI,CAAC,CAAC;MAC3C,CAAC,CAAC;IACN;IAEA,SAASO,UAAU,CAACL,UAAU,EAAE;MAC9B,IAAItB,KAAK,CAACuB,MAAM,CAACC,OAAO,EAAEH,gBAAgB,CAACC,UAAU,CAAC,MACjDG,kBAAkB,CAACH,UAAU,CAAC;IACrC;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA,OAAO;MACL,GAAG7B,MAAM,CAACS,KAAK,CAAC;MAChB;MACAyB,UAAU;MACV;MACA;MACA3B;IACF,CAAC;EACH,CAAC;EACD4B,UAAU,EAAE;IACV/B;EACF;AACF,CAAC","names":["reactive","toRefs","useStore","useRoute","useRouter","HouseListingForm","setup","store","route","router","state","image","selectImage","uploadHouseListingImage","id","formData","FormData","append","previewImage","dispatch","body","value","then","console","log","push","name","catch","e","editHouseListing","houseModel","params","houseId","createHouseListing","data","submitForm","components"],"sourceRoot":"","sources":["/Users/frostmoon/Documents/DTT projects/Vue js/house-listing-app/src/views/CreateHouseView.vue"],"sourcesContent":["<template>\n  <div class=\"root\">\n    <div class=\"create-house-container\">\n      <router-link to=\"/\" style=\"text-decoration: none; color: inherit\">\n        <div class=\"back-button\">\n          <img\n            src=\"@/assets/ic_back_grey@3x.png\"\n            alt=\"ic_back\"\n            width=\"20\"\n            height=\"20\"\n          />\n          <div class=\"back-button-label\">Back to overview</div>\n        </div>\n      </router-link>\n      <div>\n        <div v-if=\"route.params.houseId\" class=\"header1\">Edit dlisting</div>\n        <div v-else class=\"header1\">Create new listing</div>\n        <house-listing-form\n          @submitForm=\"submitForm\"\n          @selectImage=\"selectImage\"\n          :houseId=\"route.params.houseId\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { reactive, toRefs } from \"vue\";\nimport { useStore } from \"vuex\";\nimport { useRoute, useRouter } from \"vue-router\";\nimport HouseListingForm from \"@/components/HouseListingForm.vue\";\n\nexport default {\n  setup() {\n    const store = useStore();\n    const route = useRoute();\n    const router = useRouter();\n\n    const state = reactive({\n      // buttonClicked: false,\n      // previewImage: null,\n      image: null,\n    });\n    // const house = computed(() => {\n    //   return store.getters.getByIdEditModel(route.params.houseId);\n    // });\n\n\n      function selectImage() {\n\n      }\n\n    function uploadHouseListingImage(id) {\n      const formData = new FormData();\n      formData.append(\"image\", state.image);\n      if (state.previewImage) {\n        store\n          .dispatch(\"uploadHouseImg\", {\n            id: id,\n            body: formData,\n            value: state.previewImage,\n          })\n          .then(() => {\n            // API success\n            console.log(\"img uploaded\");\n            router.push({ name: \"home\" });\n          })\n          .catch((e) => {\n            // API fail\n            console.log(\"error in request upload\", e);\n          });\n      } else {\n        router.push({ name: \"home\" });\n      }\n    }\n    // function submitButtonClicked() {\n    //   state.buttonClicked = true;\n    // }\n\n    function editHouseListing(houseModel) {\n      store\n        .dispatch(\"editHouse\", { id: route.params.houseId, body: houseModel })\n        .then(() => {\n          // API success\n          uploadHouseListingImage(route.params.houseId);\n          console.log(\"data edited\");\n        })\n        .catch((e) => {\n          // API fail\n          console.log(\"error in request edit\", e);\n        });\n    }\n\n    function createHouseListing(houseModel) {\n      store\n        .dispatch(\"createHouse\", houseModel)\n        .then((data) => {\n          // API success\n          uploadHouseListingImage(data.id);\n          console.log(\"data created\");\n        })\n        .catch((e) => {\n          // API fail\n          console.log(\"error in request create\", e);\n        });\n    }\n\n    function submitForm(houseModel) {\n      if (route.params.houseId) editHouseListing(houseModel);\n      else createHouseListing(houseModel);\n    }\n    // function uploadImage(e) {\n    //   const image = e.target.files[0];\n    //   state.image = image;\n    //   const reader = new FileReader();\n    //   reader.readAsDataURL(image);\n    //   reader.onload = (e) => {\n    //     this.previewImage = e.target.result;\n    //   };\n    // }\n    return {\n      ...toRefs(state),\n      // house,\n      submitForm,\n      // submitButtonClicked,\n      // uploadImage,\n      route,\n    };\n  },\n  components: {\n    HouseListingForm,\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.root {\n  margin: 0;\n  padding: 0;\n  background-image: url(\"/src/assets/img_background@3x.png\");\n\n  /* Full height */\n  height: 100%;\n\n  /* Center and scale the image nicely */\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: cover;\n\n  .create-house-container {\n    margin: 30px 0 0 15%;\n    .back-button {\n      margin-bottom: 20px;\n    }\n  }\n\n  .header1 {\n    margin-bottom: 20px;\n  }\n}\n</style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}