{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { createStore } from \"vuex\";\nimport Api from \"@/api/client\";\nArray.prototype.sortBy = function (p) {\n  return this.slice(0).sort(function (a, b) {\n    return a[p] > b[p] ? 1 : a[p] < b[p] ? -1 : 0;\n  });\n};\nfunction removeObjectWithId(arr, id) {\n  console.log(\"arr\");\n  console.log(arr);\n  console.log(\"arr\");\n  const objWithIdIndex = arr.findIndex(obj => obj.id === id);\n  console.log(\"objWithIdIndex\");\n  console.log(objWithIdIndex);\n  console.log(\"objWithIdIndex\");\n  if (objWithIdIndex > -1) {\n    arr.splice(objWithIdIndex, 1);\n  }\n  return arr;\n}\nexport default createStore({\n  state: {\n    houses: []\n  },\n  getters: {\n    search: state => searchText => {\n      // check if value is event caused by clear x in input\n      if (searchText.target) return state.houses;\n      return state.houses.filter(house => house.location.street.toLowerCase().includes(searchText.toLowerCase()));\n    },\n    sortBy: state => byPrice => {\n      if (state.houses) {\n        if (byPrice) {\n          return state.houses.sortBy(\"price\");\n        }\n        return state.houses.sortBy(\"size\");\n      }\n      return [];\n    },\n    getById: state => id => {\n      return state.houses.filter(house => house.id.toString() == id)[0];\n    }\n  },\n  mutations: {\n    /**\n     * Updates a specific property in the store\n     * @param {object} state The store's state\n     * @param {object} data An object containing the property and value\n     */\n    updateProperty: (state, data) => {\n      state[data.property] = data.value;\n    },\n    /**\n     * Append a specific property in the store\n     * @param {object} state The store's state\n     * @param {object} data An object containing the property and value\n     */\n    appendProperty: (state, data) => {\n      state[data.property].push(data.value);\n    }\n  },\n  actions: {\n    getHouses: context => {\n      Api.get(\"/houses\").then(data => context.commit(\"updateProperty\", {\n        property: \"houses\",\n        value: data\n      })).catch(error => console.error(error));\n    },\n    createHouse({\n      commit\n    }, body) {\n      Api.post(\"/houses\", body).then(data => commit(\"appendProperty\", {\n        property: \"houses\",\n        value: data\n      })).catch(error => console.error(error));\n    },\n    deleteHouse({\n      commit\n    }, id) {\n      Api.post(\"/houses\", id).then(() => commit(\"updateProperty\", {\n        property: \"houses\",\n        value: removeObjectWithId(this.state, id)\n      })).catch(error => console.error(error));\n    }\n  }\n});","map":{"version":3,"names":["createStore","Api","Array","prototype","sortBy","p","slice","sort","a","b","removeObjectWithId","arr","id","console","log","objWithIdIndex","findIndex","obj","splice","state","houses","getters","search","searchText","target","filter","house","location","street","toLowerCase","includes","byPrice","getById","toString","mutations","updateProperty","data","property","value","appendProperty","push","actions","getHouses","context","get","then","commit","catch","error","createHouse","body","post","deleteHouse"],"sources":["/Users/frostmoon/Documents/DTT projects/Vue js/house-listing-app/src/store/index.js"],"sourcesContent":["import { createStore } from \"vuex\";\nimport Api from \"@/api/client\";\n\nArray.prototype.sortBy = function (p) {\n  return this.slice(0).sort(function (a, b) {\n    return a[p] > b[p] ? 1 : a[p] < b[p] ? -1 : 0;\n  });\n};\n\nfunction removeObjectWithId(arr, id) {\n\n  console.log(\"arr\")\n  console.log(arr)\n  console.log(\"arr\")\n\n  const objWithIdIndex = arr.findIndex((obj) => obj.id === id);\n\n  console.log(\"objWithIdIndex\")\n  console.log(objWithIdIndex)\n  console.log(\"objWithIdIndex\")\n\n  if (objWithIdIndex > -1) {\n    arr.splice(objWithIdIndex, 1);\n  }\n\n  return arr;\n}\n\nexport default createStore({\n  state: {\n    houses: [],\n  },\n\n  getters: {\n    search: (state) => (searchText) => {\n      // check if value is event caused by clear x in input\n      if (searchText.target) return state.houses;\n      return state.houses.filter((house) =>\n        house.location.street.toLowerCase().includes(searchText.toLowerCase())\n      );\n    },\n    sortBy: (state) => (byPrice) => {\n      if (state.houses) {\n        if (byPrice) {\n          return state.houses.sortBy(\"price\");\n        }\n        return state.houses.sortBy(\"size\");\n      }\n      return [];\n    },\n    getById: (state) => (id) => {\n      return state.houses.filter((house) => house.id.toString() == id)[0];\n    },\n  },\n  mutations: {\n    /**\n     * Updates a specific property in the store\n     * @param {object} state The store's state\n     * @param {object} data An object containing the property and value\n     */\n    updateProperty: (state, data) => {\n      state[data.property] = data.value;\n    },\n    /**\n     * Append a specific property in the store\n     * @param {object} state The store's state\n     * @param {object} data An object containing the property and value\n     */\n    appendProperty: (state, data) => {\n      state[data.property].push(data.value);\n    },\n  },\n\n  actions: {\n    getHouses: (context) => {\n      Api.get(\"/houses\")\n        .then((data) =>\n          context.commit(\"updateProperty\", { property: \"houses\", value: data })\n        )\n        .catch((error) => console.error(error));\n    },\n\n    createHouse({ commit }, body) {\n      Api.post(\"/houses\", body)\n        .then((data) =>\n          commit(\"appendProperty\", { property: \"houses\", value: data })\n        )\n        .catch((error) => console.error(error));\n    },\n\n    deleteHouse({ commit }, id) {\n      Api.post(\"/houses\", id)\n        .then(() =>\n          commit(\"updateProperty\", {\n            property: \"houses\",\n            value: removeObjectWithId(this.state, id),\n          })\n        )\n        .catch((error) => console.error(error));\n    },\n  },\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}