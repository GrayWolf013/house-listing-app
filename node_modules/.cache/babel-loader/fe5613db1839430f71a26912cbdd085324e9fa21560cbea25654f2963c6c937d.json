{"ast":null,"code":"import { createStore } from 'vuex';\nimport Api from \"@/api/client\";\nArray.prototype.sortBy = function (p) {\n  return this.slice(0).sort(function (a, b) {\n    return a[p] > b[p] ? 1 : a[p] < b[p] ? -1 : 0;\n  });\n};\nexport default createStore({\n  state: {\n    houses: []\n  },\n  getters: {\n    search: state => searchText => {\n      // check if value is event caused by clear x in input\n      if (searchText.target) return state.houses;\n      return state.houses.filter(house => house.location.street.toLowerCase().includes(searchText.toLowerCase()));\n    },\n    sortBy: state => byPrice => {\n      if (state.houses) {\n        if (byPrice) {\n          return state.houses.sortBy('price');\n        }\n        return state.houses.sortBy('size');\n      }\n      return [];\n    },\n    getById: state => id => {\n      // console.log(\"get house\")\n      // console.log(state.houses.filter(house => console.log(house.id, house.id.toString(), id, house.id.toString() === id)))\n      // console.log(\"get house\")\n\n      // return state.houses.filter(house => house.id.toString() == id)\n\n      return state.houses.filter(house => {\n        // console.log(\"get house\")\n        // console.log(house)\n        // console.log(house.id.toString())\n        // console.log(id)\n        // console.log(\"get house\")\n        // const houseId = house.id\n        // return houseId == id\n\n        if (house.id.toString() == id) {\n          console.log(\"get house\");\n          return house;\n        }\n      });\n      // if (state.houses) { \n      //   if (byPrice) {\n      //     return state.houses.sortBy('price')\n      //   } \n      //   return state.houses.sortBy('size')\n      // }\n      // return []\n    }\n  },\n\n  mutations: {\n    /**\n     * Updates a specific property in the store\n     * @param {object} state The store's state\n     * @param {object} data An object containing the property and value\n     */\n    updateProperty: (state, data) => {\n      state[data.property] = data.value;\n    }\n  },\n  actions: {\n    getHouses: context => {\n      Api.get(\"/houses\").then(data => context.commit('updateProperty', {\n        property: 'houses',\n        value: data\n      })).catch(error => console.error(error));\n    }\n  }\n});","map":{"version":3,"names":["createStore","Api","Array","prototype","sortBy","p","slice","sort","a","b","state","houses","getters","search","searchText","target","filter","house","location","street","toLowerCase","includes","byPrice","getById","id","toString","console","log","mutations","updateProperty","data","property","value","actions","getHouses","context","get","then","commit","catch","error"],"sources":["/Users/frostmoon/Documents/DTT projects/Vue js/house-listing-app/src/store/index.js"],"sourcesContent":["import { createStore } from 'vuex'\nimport Api from \"@/api/client\";\n\nArray.prototype.sortBy = function(p) {\n  return this.slice(0).sort(function(a,b) {\n    return (a[p] > b[p]) ? 1 : (a[p] < b[p]) ? -1 : 0;\n  });\n}\n\nexport default createStore({\n  state: {\n    houses: [],\n  },\n  \n  getters: {\n    search: (state) => (searchText) => {\n      // check if value is event caused by clear x in input\n      if(searchText.target) return state.houses\n      return state.houses.filter(house => house.location.street.toLowerCase().includes(searchText.toLowerCase()))\n    },\n    sortBy: (state) => (byPrice) => {\n      if (state.houses) {\n        if (byPrice) {\n          return state.houses.sortBy('price')\n        } \n        return state.houses.sortBy('size')\n      }\n      return []\n    },\n    getById: (state) => (id) => {\n      // console.log(\"get house\")\n      // console.log(state.houses.filter(house => console.log(house.id, house.id.toString(), id, house.id.toString() === id)))\n      // console.log(\"get house\")\n\n      // return state.houses.filter(house => house.id.toString() == id)\n  \n\n      return state.houses.filter(house => {\n        // console.log(\"get house\")\n        // console.log(house)\n        // console.log(house.id.toString())\n        // console.log(id)\n        // console.log(\"get house\")\n        // const houseId = house.id\n        // return houseId == id\n\n        if (house.id.toString() == id) {\n          console.log(\"get house\")\n          return house\n        }\n      })\n      // if (state.houses) { \n      //   if (byPrice) {\n      //     return state.houses.sortBy('price')\n      //   } \n      //   return state.houses.sortBy('size')\n      // }\n      // return []\n    },\n  },\n  mutations: {\n    /**\n     * Updates a specific property in the store\n     * @param {object} state The store's state\n     * @param {object} data An object containing the property and value\n     */\n    updateProperty: (state, data) => {\n      state[data.property] = data.value;\n    },\n  },\n\n  actions: {\n    getHouses: (context) => {\n      Api.get(\"/houses\")\n        .then(data => context.commit('updateProperty', { property: 'houses', value: data }))\n        .catch((error) => console.error(error))\n    },\n  },\n});\n"],"mappings":"AAAA,SAASA,WAAW,QAAQ,MAAM;AAClC,OAAOC,GAAG,MAAM,cAAc;AAE9BC,KAAK,CAACC,SAAS,CAACC,MAAM,GAAG,UAASC,CAAC,EAAE;EACnC,OAAO,IAAI,CAACC,KAAK,CAAC,CAAC,CAAC,CAACC,IAAI,CAAC,UAASC,CAAC,EAACC,CAAC,EAAE;IACtC,OAAQD,CAAC,CAACH,CAAC,CAAC,GAAGI,CAAC,CAACJ,CAAC,CAAC,GAAI,CAAC,GAAIG,CAAC,CAACH,CAAC,CAAC,GAAGI,CAAC,CAACJ,CAAC,CAAC,GAAI,CAAC,CAAC,GAAG,CAAC;EACnD,CAAC,CAAC;AACJ,CAAC;AAED,eAAeL,WAAW,CAAC;EACzBU,KAAK,EAAE;IACLC,MAAM,EAAE;EACV,CAAC;EAEDC,OAAO,EAAE;IACPC,MAAM,EAAGH,KAAK,IAAMI,UAAU,IAAK;MACjC;MACA,IAAGA,UAAU,CAACC,MAAM,EAAE,OAAOL,KAAK,CAACC,MAAM;MACzC,OAAOD,KAAK,CAACC,MAAM,CAACK,MAAM,CAACC,KAAK,IAAIA,KAAK,CAACC,QAAQ,CAACC,MAAM,CAACC,WAAW,EAAE,CAACC,QAAQ,CAACP,UAAU,CAACM,WAAW,EAAE,CAAC,CAAC;IAC7G,CAAC;IACDhB,MAAM,EAAGM,KAAK,IAAMY,OAAO,IAAK;MAC9B,IAAIZ,KAAK,CAACC,MAAM,EAAE;QAChB,IAAIW,OAAO,EAAE;UACX,OAAOZ,KAAK,CAACC,MAAM,CAACP,MAAM,CAAC,OAAO,CAAC;QACrC;QACA,OAAOM,KAAK,CAACC,MAAM,CAACP,MAAM,CAAC,MAAM,CAAC;MACpC;MACA,OAAO,EAAE;IACX,CAAC;IACDmB,OAAO,EAAGb,KAAK,IAAMc,EAAE,IAAK;MAC1B;MACA;MACA;;MAEA;;MAGA,OAAOd,KAAK,CAACC,MAAM,CAACK,MAAM,CAACC,KAAK,IAAI;QAClC;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA,IAAIA,KAAK,CAACO,EAAE,CAACC,QAAQ,EAAE,IAAID,EAAE,EAAE;UAC7BE,OAAO,CAACC,GAAG,CAAC,WAAW,CAAC;UACxB,OAAOV,KAAK;QACd;MACF,CAAC,CAAC;MACF;MACA;MACA;MACA;MACA;MACA;MACA;IACF;EACF,CAAC;;EACDW,SAAS,EAAE;IACT;AACJ;AACA;AACA;AACA;IACIC,cAAc,EAAE,CAACnB,KAAK,EAAEoB,IAAI,KAAK;MAC/BpB,KAAK,CAACoB,IAAI,CAACC,QAAQ,CAAC,GAAGD,IAAI,CAACE,KAAK;IACnC;EACF,CAAC;EAEDC,OAAO,EAAE;IACPC,SAAS,EAAGC,OAAO,IAAK;MACtBlC,GAAG,CAACmC,GAAG,CAAC,SAAS,CAAC,CACfC,IAAI,CAACP,IAAI,IAAIK,OAAO,CAACG,MAAM,CAAC,gBAAgB,EAAE;QAAEP,QAAQ,EAAE,QAAQ;QAAEC,KAAK,EAAEF;MAAK,CAAC,CAAC,CAAC,CACnFS,KAAK,CAAEC,KAAK,IAAKd,OAAO,CAACc,KAAK,CAACA,KAAK,CAAC,CAAC;IAC3C;EACF;AACF,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}